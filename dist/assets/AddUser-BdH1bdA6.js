import{j as e}from"./index-ePZmuw5s.js";import{r as f}from"./react-DNgDP3D6.js";const k=[{label:"Dashboard",path:"/admin-dashboard"},{label:"Opportunity",path:"/admin-dashboard/oppurtunity"},{label:"Users",path:"/admin-dashboard/users",submenu:[{label:"All Users",path:"/admin-dashboard/users"}]},{label:"Leads",path:"/admin-dashboard/leads",submenu:[{label:"Create Lead",path:"/admin-dashboard/mannual-leads/add"}]},{label:"Manual Leads",path:"/admin-dashboard/mannual-leads"},{label:"Website Leads",path:"/admin-dashboard/contact"},{label:"Meta",path:"/admin-dashboard/meta",submenu:[{label:"Meta Leads",path:"/admin-dashboard/meta"},{label:"CA Leads",path:"/admin-dashboard/ca-leads"},{label:"Digital Leads",path:"/admin-dashboard/digital-leads"},{label:"Web Dev Leads",path:"/admin-dashboard/web-development-leads"},{label:"Travel Leads",path:"/admin-dashboard/travel-agency-leads"}]},{label:"Google",path:"/admin-dashboard/google",submenu:[{label:"Google Ads",path:"/admin-dashboard/google-ads"}]},{label:"Stats",path:"/admin-dashboard/stats"},{label:"Appointments",path:"/admin-dashboard/appointments"},{label:"Integrations",path:"/admin-dashboard/integrations"}],N=({item:s,formData:a,handleChange:d})=>{const c=a.access.some(l=>l.path===s.path),r=s.submenu&&s.submenu.every(l=>a.access.some(o=>o.path===l.path));return e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer transition ${c?"bg-blue-50 text-blue-700 font-semibold":"hover:bg-gray-100"}`,children:[e.jsx("input",{type:"checkbox",name:"access",value:s.path,checked:c||r,onChange:l=>d(l,s),className:"h-4 w-4 accent-blue-600"}),s.label]}),s.submenu&&e.jsx("div",{className:"ml-6 mt-2 space-y-2 border-l-2 border-gray-200 pl-3",children:s.submenu.map((l,o)=>e.jsx(N,{item:l,formData:a,handleChange:d},o))})]})},j=({label:s,name:a,type:d="text",value:c,onChange:r,placeholder:l})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-2 text-gray-700 font-medium",children:s}),e.jsx("input",{name:a,type:d,value:c,onChange:r,placeholder:l,className:"input-style",required:!0})]});function L(){const s=f.useMemo(()=>({name:"",email:"",phone:"",password:"",confirmPassword:"",role:"",adminId:"",access:[]}),[]),[a,d]=f.useState(s),[c,r]=f.useState(""),[l,o]=f.useState(""),v=t=>{let n=[{label:t.label,path:t.path}];return t.submenu&&t.submenu.forEach(h=>{n=[...n,...v(h)]}),n},m=f.useCallback((t,n)=>{const{name:h,value:y,checked:x}=t.target;if(h==="access"){const i=v(n);d(g=>{let u=[...g.access];return x?i.forEach(p=>{u.some(b=>b.path===p.path)||u.push(p)}):u=u.filter(p=>!i.some(b=>b.path===p.path)),{...g,access:u}})}else d(i=>({...i,[h]:y}))},[]),C=async t=>{t.preventDefault();const{name:n,email:h,phone:y,password:x,confirmPassword:i,role:g,access:u}=a;if(!n||!h||!y||!x||!i||!g){r("All fields are required!"),o("");return}if(x!==i){r("Passwords do not match!"),o("");return}const p=JSON.parse(localStorage.getItem("User"));let b=null;p?.role==="admin"&&(b=p.id);const S={EmpUsername:n,email:h,phone:y,password:x,confirmPassword:i,role:g,adminId:b,isActive:!0,permissions:u,lastLogin:null};try{const w=await fetch("https://dbbackend.devnexussolutions.com/auth/api/signup-users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}),A=await w.json();w.ok?(o("User added successfully!"),d(s),r("")):(r(A.message||"Something went wrong!"),o(""))}catch(w){console.error(w),r("Network or server error"),o("")}};return e.jsxs("div",{className:"min-h-screen bg-white flex items-center justify-center p-6",children:[e.jsxs("div",{className:"w-full max-w-5xl bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"Add New User"}),c&&e.jsx("p",{className:"mb-4 text-center text-red-600 font-medium",children:c}),l&&e.jsx("p",{className:"mb-4 text-center text-green-600 font-medium",children:l}),e.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(j,{label:"Name",name:"name",value:a.name,onChange:m,placeholder:"Enter full name"}),e.jsx(j,{label:"Email",name:"email",type:"email",value:a.email,onChange:m,placeholder:"Enter email"}),e.jsx(j,{label:"Phone",name:"phone",type:"tel",value:a.phone,onChange:m,placeholder:"Enter phone number"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"role",className:"mb-2 text-gray-700 font-medium",children:"Role"}),e.jsxs("select",{id:"role",name:"role",value:a.role,onChange:m,className:"input-style",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select Role"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"user",children:"User"})]})]}),e.jsx(j,{label:"Password",name:"password",type:"password",value:a.password,onChange:m,placeholder:"Enter password"}),e.jsx(j,{label:"Confirm Password",name:"confirmPassword",type:"password",value:a.confirmPassword,onChange:m,placeholder:"Re-enter password"}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Page Access"}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 max-h-[400px] overflow-y-auto grid grid-cols-1 sm:grid-cols-2 gap-4",children:k.map((t,n)=>e.jsx(N,{item:t,formData:a,handleChange:m},n))})]}),e.jsx("button",{type:"submit",className:"sm:col-span-2 w-full mt-4 py-3 bg-blue-600 text-white font-semibold rounded-full hover:bg-blue-700 transition duration-200",children:"Submit"})]})]}),e.jsx("style",{jsx:!0,children:`
        .input-style {
          border: 1px solid #d1d5db;
          padding: 0.5rem 1rem;
          border-radius: 0.375rem;
          outline: none;
          transition: border 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .input-style:focus {
          border-color: #3b82f6;
          box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
        }
      `})]})}export{L as default};
