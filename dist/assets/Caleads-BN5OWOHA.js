import{j as e}from"./index-ePZmuw5s.js";import{r as t}from"./react-DNgDP3D6.js";const w={Paid:"text-green-600 bg-green-100",Due:"text-yellow-600 bg-yellow-100",Canceled:"text-red-600 bg-red-100"},v=()=>{const[h,m]=t.useState([]),[c,g]=t.useState([]),[j,f]=t.useState(!0),[n,y]=t.useState("");return t.useEffect(()=>{(async()=>{try{const a=await fetch("https://dbbackend.devnexussolutions.com/all-leads-via-webhook",{credentials:"include"});if(!a.ok)throw new Error("Failed to fetch data");const l=(await a.json())?.leads||[],i=new Set,N=l.map((r,d)=>{const p={};return(r.field_data||[]).forEach(x=>{const u=x.name.replace(/_/g," ").replace(/\?$/,"");i.add(u),p[u]=x.values?.join(", ")||"N/A"}),{id:r._id||`#LEAD${d+1}`,createdDate:r.createdAt?new Date(r.createdAt).toLocaleDateString("en-IN"):"N/A",dueDate:"20-10-2023",price:"â‚¹0.00",status:"Due",image:`https://randomuser.me/api/portraits/${d%2?"men":"women"}/${d+1}.jpg`,fields:p}});m(N),g(Array.from(i))}catch(a){console.error(a),y("Something went wrong while fetching leads.")}finally{f(!1)}})()},[]),j?e.jsx("div",{className:"p-6",children:"Loading..."}):n?e.jsx("div",{className:"p-6 text-red-600",children:n}):e.jsx("div",{className:"p-6 bg-white shadow-md rounded-lg overflow-x-auto",children:e.jsxs("table",{className:"min-w-full table-auto text-sm text-left",children:[e.jsx("thead",{className:"text-gray-700 bg-gray-100 uppercase text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Image"}),c.map((s,a)=>e.jsx("th",{className:"px-4 py-3",children:s},a)),e.jsx("th",{className:"px-4 py-3",children:"Created Date"}),e.jsx("th",{className:"px-4 py-3",children:"Due Date"}),e.jsx("th",{className:"px-4 py-3",children:"Price"}),e.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),e.jsx("tbody",{className:"text-gray-600 divide-y",children:h.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("img",{src:s.image,alt:"User",className:"w-10 h-10 rounded-full object-cover"})}),c.map((o,l)=>e.jsx("td",{className:"px-4 py-3",children:s.fields[o]||"N/A"},l)),e.jsx("td",{className:"px-4 py-3",children:s.createdDate}),e.jsx("td",{className:"px-4 py-3",children:s.dueDate}),e.jsx("td",{className:"px-4 py-3 font-medium",children:s.price}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${w[s.status]||"text-gray-600 bg-gray-100"}`,children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${s.status==="Paid"?"bg-green-500":s.status==="Due"?"bg-yellow-500":s.status==="Canceled"?"bg-red-500":"bg-gray-400"}`}),s.status]})})]},a))})]})})};export{v as default};
