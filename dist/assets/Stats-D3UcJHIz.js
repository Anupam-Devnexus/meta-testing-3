import{j as e,q as C,r as U,f as A}from"./index-ePZmuw5s.js";import{r as c}from"./react-DNgDP3D6.js";import{u as F}from"./LeadsGet-C2X5tLaH.js";import{u as S}from"./UsersGet-DoIcZEnz.js";import{u as M}from"./MetaLeadsGet-DbKrsk6c.js";import{R as h,B as y,C as g,X as j,Y as f,T as x,L as p,a as N,P as O,b as K,c as _,d as R,e as T}from"./charts-CZ9u0xu3.js";function $(){const{metaleads:r,loading:a,error:l,fetchMetaLeads:d}=M();c.useEffect(()=>{d()},[]);const i=s=>{if(!s)return 0;const n=s.replace(/[â‚¹,_]/g,"").split("â€“").map(v=>parseInt(v.trim()));return n.length===2&&!isNaN(n[0])&&!isNaN(n[1])?Math.round((n[0]+n[1])/2):isNaN(n[0])?0:n[0]},o=r?.leads?.map((s,t)=>{const n=s.AllFields||{};return{name:n.full_name||`Lead ${t+1}`,budget:i(n["what_is_your_monthly_marketing_budget?"]),city:n.city||"Unknown"}})||[];return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Meta Leads Budget Chart"}),a?e.jsx("p",{children:"Loading chart..."}):l?e.jsx("p",{children:"Error loading data"}):e.jsx(h,{width:"100%",height:400,children:e.jsxs(y,{data:o,children:[e.jsx(g,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"name",angle:-45,textAnchor:"end",interval:0,height:80}),e.jsx(f,{}),e.jsx(x,{}),e.jsx(p,{}),e.jsx(N,{dataKey:"budget",fill:"#8884d8",name:"Budget"})]})})]})}function w(){const{data:r,loading:a,error:l,fetchData:d}=F();c.useEffect(()=>{d()},[]);const i=r?.leads?.map(o=>({name:o.name||"No Name",budget:Number(o.budget)||0,createdBy:o.createdBy||"Unknown"}))||[];return e.jsxs("div",{className:"w-full h-[400px] p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Budget Chart (per Lead)"}),a&&e.jsx("p",{children:"Loading..."}),l&&e.jsx("p",{children:"Error loading data."}),!a&&i.length>0&&e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(y,{data:i,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(g,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"name"}),e.jsx(f,{}),e.jsx(x,{}),e.jsx(p,{}),e.jsx(N,{dataKey:"budget",fill:"#82ca9d",name:"Budget"})]})})]})}const L=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF"];function k(){const{users:r,loading:a,error:l,fetchUser:d}=S();c.useEffect(()=>{d()},[]);const i={};r?.users?.forEach(s=>{const t=s.role||"Unknown";i[t]=(i[t]||0)+1});const o=Object.entries(i).map(([s,t])=>({name:s,value:t}));return e.jsxs("div",{className:"w-full h-[400px] p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"User Roles Distribution (Pie Chart)"}),a&&e.jsx("p",{children:"Loading..."}),l&&e.jsx("p",{children:"Error loading users."}),!a&&o.length>0&&e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(O,{children:[e.jsx(K,{data:o,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:120,fill:"#8884d8",label:!0,children:o.map((s,t)=>e.jsx(_,{fill:L[t%L.length]},`cell-${t}`))}),e.jsx(x,{}),e.jsx(p,{verticalAlign:"bottom",height:36})]})})]})}const I={salesTrend:[{month:"Jan",revenue:1e5},{month:"Feb",revenue:12e4},{month:"Mar",revenue:15e4},{month:"Apr",revenue:13e4},{month:"May",revenue:2e5},{month:"Jun",revenue:18e4},{month:"Jul",revenue:21e4},{month:"Aug",revenue:22e4},{month:"Sep",revenue:24e4},{month:"Oct",revenue:23e4},{month:"Nov",revenue:25e4},{month:"Dec",revenue:27e4}],pipelineValueByStage:{proposal:5e5,negotiation:3e5,closed:125e4}},P={appointmentsScheduled:450,activityCount:{calls:1200,emails:2e3,followUps:750}},u={salesInsights:I,activityOverview:P},J=()=>{const r=u.salesInsights.salesTrend;return e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Sales Trend"}),e.jsx(h,{width:"100%",height:300,children:e.jsxs(R,{data:r,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(g,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),e.jsx(j,{dataKey:"month",stroke:"#8884d8"}),e.jsx(f,{stroke:"#8884d8"}),e.jsx(x,{contentStyle:{backgroundColor:"#f9f9f9",borderRadius:"8px"},formatter:a=>`$${a.toLocaleString()}`}),e.jsx(T,{type:"monotone",dataKey:"revenue",stroke:"#4f46e5",strokeWidth:3,dot:{r:5,fill:"#4f46e5"},activeDot:{r:7}})]})})]})},Y=()=>{const r=Object.entries(u.activityOverview.activityCount).map(([a,l])=>({activity:a.charAt(0).toUpperCase()+a.slice(1),count:l}));return e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Activity Overview"}),e.jsx(h,{width:"100%",height:300,children:e.jsxs(y,{data:r,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(g,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),e.jsx(j,{dataKey:"activity",stroke:"#8884d8"}),e.jsx(f,{stroke:"#8884d8"}),e.jsx(x,{contentStyle:{backgroundColor:"#f9f9f9",borderRadius:"8px"}}),e.jsx(p,{}),e.jsx(N,{dataKey:"count",fill:"#4f46e5",barSize:40,radius:[5,5,0,0]})]})})]})};function H(){const{metaleads:r,fetchMetaLeads:a}=M(),{data:l,fetchData:d}=F(),{users:i,fetchUser:o}=S(),s=localStorage.getItem("fb_connect")==="true",[t,n]=c.useState(s?"meta":"manual");c.useEffect(()=>{s&&a(),d(),o()},[s]);const v=r?.leads?.length||0,B=l?.leads?.length||0,D=i?.users?.length||0,b=E=>n(E);return e.jsxs("div",{className:"p-2 space-y-3",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"ðŸ“Š Statistics Overview For You"}),e.jsxs("div",{className:`grid gap-6 ${s?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1 sm:grid-cols-2"}`,children:[s?e.jsx(m,{title:"Meta Leads",value:v,icon:e.jsx(C,{className:"text-blue-500"}),active:t==="meta",onClick:()=>b("meta")}):e.jsx(m,{title:"Connect Facebook to See Meta Leads",value:"-",icon:e.jsx(C,{className:"text-blue-500"}),active:!1}),e.jsx(m,{title:"Manual Leads",value:B,icon:e.jsx(U,{className:"text-green-500"}),active:t==="manual",onClick:()=>b("manual")}),e.jsx(m,{title:"Users",value:D,icon:e.jsx(A,{className:"text-purple-500"}),active:t==="users",onClick:()=>b("users")})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md",children:s?e.jsxs(e.Fragment,{children:[t==="meta"&&e.jsx($,{}),t==="manual"&&e.jsx(w,{}),t==="users"&&e.jsx(k,{})]}):e.jsxs(e.Fragment,{children:[t==="manual"&&e.jsx(w,{}),t==="users"&&e.jsx(k,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(J,{data:u.salesInsights}),e.jsx(Y,{data:u.activityOverview})]})]})]})}function m({title:r,value:a,icon:l,onClick:d,active:i}){return e.jsxs("div",{onClick:d,className:`bg-white shadow-md rounded-xl p-6 flex items-center gap-4 cursor-pointer transition-all duration-300 border
        ${i?"shadow-xl ring-2 ring-blue-400 scale-105":"hover:shadow-lg hover:scale-105"}`,children:[e.jsx("div",{className:"text-4xl",children:l}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:r}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a.toString()})]})]})}export{H as default};
