import{j as e}from"./index-ePZmuw5s.js";import{u as v,r as i}from"./react-DNgDP3D6.js";function k(){const o=v(),r=localStorage.getItem("User"),s=r?JSON.parse(r):null,[l,f]=i.useState(null),[h,u]=i.useState(!1),[m,c]=i.useState("");if(i.useEffect(()=>{(async()=>{if(!s?.id||!s?.token){c("Missing user ID or token. Please log in again.");return}u(!0);try{const t=await fetch("https://dbbackend.devnexussolutions.com/auth/api/get-all-users",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.token}`}});if(!t.ok)throw new Error(`Failed: ${t.status} ${t.statusText}`);const d=(await t.json()).users?.find(N=>N._id===s.id);d?(f(d),localStorage.setItem("UserDetails",JSON.stringify(d))):c("User not found in backend response")}catch(t){c(t.message)}finally{u(!1)}})()},[s?.id,s?.token]),!s)return e.jsx("div",{className:"flex items-center justify-center h-screen text-red-500",children:"No user data found in localStorage"});if(h)return e.jsx("div",{className:"flex items-center justify-center h-screen text-gray-500",children:"Loading user dashboard..."});if(m)return e.jsx("div",{className:"flex items-center justify-center h-screen text-red-500",children:m});if(!l)return null;const{EmpUsername:g,email:b,role:j,_id:p,phone:y,permissions:x=[]}=l;return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white shadow-xl rounded-2xl p-6 w-full max-w-lg",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"User Dashboard"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx(a,{label:"Name",value:g}),e.jsx(a,{label:"Email",value:b}),e.jsx(a,{label:"Role",value:j,highlight:!0}),e.jsx(a,{label:"ID",value:p,small:!0}),e.jsx(a,{label:"Phone",value:y,small:!0})]}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Allowed Routes"}),x.length>0?e.jsx("ul",{className:"space-y-2",children:x.map(n=>e.jsx("li",{className:"p-3 cursor-pointer bg-gray-50 rounded-lg border flex justify-between hover:bg-gray-100",onClick:()=>o(n.path),children:e.jsx("span",{className:"font-medium text-gray-700",children:n.label||"Unnamed"})},n._id))}):e.jsx("p",{className:"text-gray-500",children:"No permissions found"})]})})}function a({label:o,value:r,highlight:s=!1,small:l=!1}){return e.jsxs("div",{className:"flex justify-between border-b pb-2",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:[o,":"]}),e.jsx("span",{className:`${s?"capitalize text-blue-600 font-semibold":"text-gray-900"} ${l?"text-sm break-all":""}`,children:r})]})}export{k as default};
