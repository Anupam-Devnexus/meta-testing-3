import{j as e}from"./index-ePZmuw5s.js";import{u as x}from"./UsersGet-DoIcZEnz.js";import{u as m,r as p}from"./react-DNgDP3D6.js";function y(){const{users:i,loading:a,error:s,fetchUser:d}=x(),l=m();p.useEffect(()=>{d()},[]);const o=i?.users||[],c=async r=>{if(window.confirm("Are you sure to delete this user?"))try{const t=localStorage.getItem("User"),n=t?JSON.parse(t).token:null;if(!n)throw new Error("No auth token found. Please login first.");if(!(await fetch(`https://dbbackend.devnexussolutions.com/auth/api/delete-user/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}})).ok)throw new Error("Failed to delete user");d(),alert("User deleted successfully ✅")}catch(t){console.error("Delete error:",t),alert("Error deleting user ❌")}},h=()=>{l("/admin-dashboard/users/add")};return e.jsxs("div",{className:"p-2 bg-gray-100 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"All Users"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:h,className:"px-4 py-2 bg-[var(--primary-color)] cursor-pointer hover:bg-blue-700 text-white font-medium rounded-full transition duration-200",children:"Add New"}),e.jsx("button",{onClick:()=>l("/admin-dashboard/upload-excel"),className:"bg-green-600 text-white px-4 py-2 rounded-xl hover:bg-green-700",children:"Upload Excel File"})]})]}),a&&e.jsx("p",{className:"text-yellow-600",children:"Loading users..."}),s&&e.jsxs("p",{className:"text-red-500",children:["Error: ",s]}),!a&&!s&&o.length>0&&e.jsx("div",{className:"overflow-x-auto bg-white rounded shadow",children:e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 border",children:"ID"}),e.jsx("th",{className:"py-2 px-4 border",children:"Name"}),e.jsx("th",{className:"py-2 px-4 border",children:"Email"}),e.jsx("th",{className:"py-2 px-4 border",children:"lastLogin"}),e.jsx("th",{className:"py-2 px-4 border",children:"role"}),e.jsx("th",{className:"py-2 px-4 border",children:"Actions"})]})}),e.jsx("tbody",{children:o.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 border",children:r._id}),e.jsx("td",{className:"py-2 px-4 border",children:r.EmpUsername}),e.jsx("td",{className:"py-2 px-4 border",children:r.email}),e.jsx("td",{className:"py-2 px-4 border",children:r.lastLogin}),e.jsx("td",{className:"py-2 px-4 border",children:r.role}),e.jsxs("td",{className:"py-2 px-2 border space-x-2",children:[e.jsx("button",{onClick:()=>l(`/admin-dashboard/users/edit/${r._id}`),className:"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600",children:"Edit"}),e.jsx("button",{onClick:()=>c(r._id),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",children:"Delete"})]})]},r._id))})]})}),!a&&!s&&o.length===0&&e.jsx("p",{className:"text-gray-500",children:"No users found."})]})}export{y as default};
