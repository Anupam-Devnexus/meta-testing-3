import{u as j,j as e}from"./index-ePZmuw5s.js";import{u as N,r as d}from"./react-DNgDP3D6.js";function k(){const i=N(),{setUser:h}=j(),[a,f]=d.useState({username:"",password:""}),[n,l]=d.useState({username:"",password:"",login:""}),[c,w]=d.useState(!1),[m,u]=d.useState(!1),g=t=>{const{name:r,value:s}=t.target;f(o=>({...o,[r]:s})),l(o=>({...o,[r]:"",login:""}))},b=()=>{let t=!0;const r={username:"",password:"",login:""};return a.username.trim()?!/\S+@\S+\.\S+/.test(a.username)&&isNaN(a.username)&&(r.username="Enter a valid email or phone number.",t=!1):(r.username="Email or phone is required.",t=!1),a.password.trim()||(r.password="Password is required.",t=!1),l(r),t},y=async t=>{if(t.preventDefault(),!!b()){u(!0);try{const r=await fetch("https://dbbackend.devnexussolutions.com/auth/api/signin-users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.username.trim(),password:a.password.trim()})}),s=await r.json();if(console.log("Backend response:",s),r.ok&&s.token&&s.user){const o=s.user.role||"User",x={id:s.user._id,name:s.user.name||"Unknown",email:s.user.email||"",role:o,token:s.token};localStorage.setItem("UserDetails",JSON.stringify(x)),h(x);const p=o.toLowerCase();i(p==="admin"?"/admin-dashboard":p==="user"?"/user-dashboard":"/")}else l(o=>({...o,login:s.msg||s.message||"Invalid credentials"}))}catch(r){console.error("Login error:",r),l(s=>({...s,login:"Something went wrong. Please try again later."}))}finally{u(!1)}}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-r from-blue-50 to-indigo-100 px-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center bg-white shadow-2xl rounded-3xl overflow-hidden w-full max-w-4xl",children:[e.jsxs("div",{className:"hidden md:flex flex-col justify-center bg-indigo-600 text-white w-1/2 p-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Welcome Back!"}),e.jsx("p",{className:"text-lg text-indigo-100",children:"Connect your Facebook Pages, integrate with Google Calendar, and manage your leads all in one place."})]}),e.jsxs("div",{className:"w-full md:w-1/2 p-10",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6 text-center md:text-left",children:"Login"}),e.jsxs("form",{className:"space-y-6",onSubmit:y,children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email or Phone"}),e.jsx("input",{type:"text",name:"username",value:a.username,onChange:g,placeholder:"Enter your email or phone",className:`w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none transition ${n.username?"border-red-500":"border-gray-300"}`}),n.username&&e.jsx("span",{className:"text-red-500 text-sm",children:n.username})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{type:c?"text":"password",name:"password",value:a.password,onChange:g,placeholder:"Enter your password",className:`w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-indigo-500 outline-none transition ${n.password?"border-red-500":"border-gray-300"}`}),e.jsx("span",{onClick:()=>w(t=>!t),className:"absolute right-3 top-3 text-sm text-indigo-600 hover:underline cursor-pointer select-none",children:c?"Hide":"Show"}),n.password&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:n.password})]}),e.jsx("button",{type:"submit",disabled:m,className:`w-full py-3 rounded-lg font-semibold transition-transform transform hover:scale-105 ${m?"bg-gray-400 text-white":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:m?"Logging in...":"Login"}),e.jsx("p",{className:"text-sm text-center text-indigo-600 cursor-pointer hover:underline",onClick:()=>i("/forgot-password"),children:"Forgot Password?"}),n.login&&e.jsx("p",{className:"text-red-500 text-center",children:n.login})]})]})]})})}export{k as default};
